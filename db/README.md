# Database Setup Guide

ุงู ูพูุดู ุดุงูู ูุงูโูุง ูุฑุจูุท ุจู ุณุงุฎุชุงุฑ ุฏุชุงุจุณ ุงุณุช.

## ๐ ูุงูโูุง

- **schema.sql**: ุณุงุฎุชุงุฑ ฺฉุงูู ุฌุฏุงูู ุฏุชุงุจุณ
- **init.sql**: ูุงู SQL ุจุฑุง ุงุฌุฑุง ุฏุณุช (ุงุฎุชุงุฑ)
- **init-database.ts**: ุงุณฺฉุฑูพุช TypeScript ุจุฑุง ุงุฌุงุฏ ุฎูุฏฺฉุงุฑ ุฏุชุงุจุณ ู ุฌุฏุงูู

## ๐ ุฑูุดโูุง ุงุฌุงุฏ ุฏุชุงุจุณ

### ุฑูุด 1: ุงุณุชูุงุฏู ุงุฒ Neon Console (ูพุดููุงุฏ)

1. ุจู [Neon Console](https://console.neon.tech/) ุจุฑูุฏ
2. ฺฉ ูพุฑูฺู ุฌุฏุฏ ุงุฌุงุฏ ฺฉูุฏ ุง ุงุฒ ูพุฑูฺู ููุฌูุฏ ุงุณุชูุงุฏู ฺฉูุฏ
3. ุฏุฑ SQL Editorุ ุฏุณุชูุฑ ุฒุฑ ุฑุง ุงุฌุฑุง ฺฉูุฏ:

```sql
CREATE DATABASE "whatsapp-receipt-manager";
```

4. ุณูพุณ ูุญุชูุง ูุงู `schema.sql` ุฑุง ฺฉูพ ู ุฏุฑ SQL Editor ุงุฌุฑุง ฺฉูุฏ

### ุฑูุด 2: ุงุณุชูุงุฏู ุงุฒ ุงุณฺฉุฑูพุช TypeScript

```bash
# ูุตุจ ูุงุจุณุชฺฏโูุง (ุงฺฏุฑ ูุตุจ ูุดุฏู)
npm install

# ุงุฌุฑุง ุงุณฺฉุฑูพุช ุงุฌุงุฏ ุฏุชุงุจุณ
npm run db:init
```

**ูฺฉุชู:** ุจุฑุง ุงู ุฑูุด ุจุงุฏ `ADMIN_DATABASE_URL` ุฑุง ุฏุฑ `.env` ุชูุธู ฺฉูุฏ:

```env
ADMIN_DATABASE_URL=postgresql://user:password@localhost:5432/postgres
```

### ุฑูุด 3: ุงุณุชูุงุฏู ุงุฒ psql (Command Line)

```bash
# ุงุชุตุงู ุจู PostgreSQL
psql -U username -d postgres

# ุงุฌุงุฏ ุฏุชุงุจุณ
CREATE DATABASE "whatsapp-receipt-manager";

# ุฎุฑูุฌ ุงุฒ psql
\q

# ุงุชุตุงู ุจู ุฏุชุงุจุณ ุฌุฏุฏ ู ุงุฌุฑุง schema
psql -U username -d whatsapp-receipt-manager -f db/schema.sql
```

## ๐ ุณุงุฎุชุงุฑ ุฏุชุงุจุณ

### ุฌุฏูู `messages`
ุฐุฎุฑู ุชูุงู ูพุงูโูุง ุฏุฑุงูุช ุงุฒ ูุงุชุณุงูพ

### ุฌุฏูู `audit_logs`
ุชุงุฑุฎฺู ุชุบุฑุงุช ูุถุนุช ูพุงูโูุง

### ุฌุฏูู `dashboard_stats`
ุขูุงุฑ ุฑูุฒุงูู ุจุฑุง ุฏุงุดุจูุฑุฏ (ุงุฎุชุงุฑ)

## โ๏ธ ุชูุธูุงุช

ุจุนุฏ ุงุฒ ุงุฌุงุฏ ุฏุชุงุจุณุ ุฏุฑ ูุงู `.env` ุง Environment Variables:

```env
DATABASE_URL=postgresql://user:password@host:5432/whatsapp-receipt-manager
```

## โ ุจุฑุฑุณ

ุจุนุฏ ุงุฒ ุงุฌุงุฏ ุฏุชุงุจุณุ ูโุชูุงูุฏ ุจุง ุงู ุฏุณุชูุฑ ุจุฑุฑุณ ฺฉูุฏ:

```sql
-- ููุงุด ุฌุฏุงูู
\dt

-- ููุงุด ุณุงุฎุชุงุฑ ุฌุฏูู messages
\d messages

-- ุดูุงุฑุด ูพุงูโูุง
SELECT COUNT(*) FROM messages;
```

## ๐ ุจูโุฑูุฒุฑุณุงู Schema

ุงฺฏุฑ ูุงุฒ ุจู ุชุบุฑ schema ุฏุงุฑุฏ:

1. ูุงู `schema.sql` ุฑุง ูุฑุงุด ฺฉูุฏ
2. ุชุบุฑุงุช ุฑุง ุฏุฑ ุฏุชุงุจุณ ุงุนูุงู ฺฉูุฏ
3. ุง ุงุฒ Migration Script ุงุณุชูุงุฏู ฺฉูุฏ

## ๐ ูฺฉุงุช ููู

- ูุงู ุฏุชุงุจุณ: `whatsapp-receipt-manager` (ุจุง ุฎุท ุชุฑู)
- ุชูุงู ุฌุฏุงูู ุฏุฑ ุงู ุฏุชุงุจุณ ุงุฌุงุฏ ูโุดููุฏ
- ุฌุฏุงูู ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุฏุฑ startup ุงุฌุงุฏ ูโุดููุฏ (ุงฺฏุฑ ูุฌูุฏ ูุฏุงุดุชู ุจุงุดูุฏ)

